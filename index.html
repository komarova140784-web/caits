<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì–ò–ë–î–î –†–û–î–ò–ù–ê –†–ü | –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –ø–æ—Ä—Ç–∞–ª</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', 'Segoe UI', system-ui, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #0c0f16 0%, #1b212e 100%);
            color: #eef2f8;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            background: rgba(10, 14, 23, 0.9);
            backdrop-filter: blur(12px);
            border-bottom: 2px solid rgba(0, 191, 255, 0.3);
            padding: 0.8rem 2rem;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .nav {
            max-width: 1300px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .logo {
            font-weight: 800;
            font-size: 1.8rem;
            background: linear-gradient(45deg, #00c3ff, #0077ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo-icon {
            background: #0077ff;
            border-radius: 12px;
            padding: 5px 10px;
            font-size: 1.2rem;
            color: white;
            -webkit-text-fill-color: white;
        }

        .nav-links {
            display: flex;
            gap: 0.3rem;
            flex-wrap: wrap;
            align-items: center;
        }

        .nav-btn {
            background: transparent;
            border: none;
            color: #a5b3d1;
            padding: 0.6rem 1.5rem;
            border-radius: 40px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid transparent;
        }

        .nav-btn:hover {
            color: #00c3ff;
            background: rgba(0, 191, 255, 0.1);
            border-color: rgba(0, 191, 255, 0.4);
        }

        .nav-btn.active {
            background: linear-gradient(145deg, #00c3ff, #0066ff);
            color: white;
            box-shadow: 0 8px 20px rgba(0, 123, 255, 0.5);
        }

        .login-btn {
            background: rgba(255, 215, 0, 0.15);
            border: 1px solid #ffd700;
            color: #ffd700;
            padding: 0.6rem 1.5rem;
            border-radius: 40px;
            font-weight: 600;
            cursor: pointer;
            margin-left: 1rem;
        }

        .login-btn:hover {
            background: #ffd700;
            color: #0b0e14;
        }

        .login-btn.active {
            background: #ffd700;
            color: #0b0e14;
        }

        /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: #1a253c;
            border-radius: 40px;
            padding: 2.5rem;
            max-width: 400px;
            width: 90%;
            border: 2px solid #0077ff;
            box-shadow: 0 20px 40px rgba(0, 119, 255, 0.3);
        }

        .modal-title {
            font-size: 2rem;
            color: #00c3ff;
            margin-bottom: 2rem;
            text-align: center;
        }

        .modal-input {
            width: 100%;
            background: #0f1a2b;
            border: 1px solid #334155;
            border-radius: 30px;
            padding: 1rem 1.5rem;
            color: white;
            font-size: 1rem;
            margin-bottom: 1rem;
            outline: none;
        }

        .modal-input:focus {
            border-color: #00c3ff;
        }

        .modal-btn {
            width: 100%;
            background: linear-gradient(145deg, #00c3ff, #0066ff);
            border: none;
            border-radius: 30px;
            padding: 1rem;
            color: white;
            font-weight: 700;
            font-size: 1.1rem;
            cursor: pointer;
            transition: 0.2s;
            margin-top: 1rem;
        }

        .modal-btn:hover {
            background: #0077ff;
            box-shadow: 0 0 20px #0077ff;
        }

        .modal-error {
            color: #ff6b6b;
            text-align: center;
            margin-top: 1rem;
            display: none;
        }

        .modal-error.show {
            display: block;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
            background: rgba(255, 215, 0, 0.1);
            padding: 0.5rem 1.5rem;
            border-radius: 40px;
            border: 1px solid #ffd700;
        }

        .user-name {
            color: #ffd700;
            font-weight: 600;
        }

        .logout-btn {
            background: transparent;
            border: none;
            color: #a5b3d1;
            cursor: pointer;
            font-size: 1.2rem;
            padding: 0 0.5rem;
        }

        .logout-btn:hover {
            color: #ff6b6b;
        }

        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä */
        .container {
            max-width: 1300px;
            margin: 2rem auto;
            padding: 0 2rem;
            flex: 1;
            width: 100%;
        }

        /* –°—Ç—Ä–∞–Ω–∏—Ü—ã */
        .page {
            display: none;
            animation: fadePage 0.3s ease;
        }

        .page.active-page {
            display: block;
        }

        @keyframes fadePage {
            from { opacity: 0.2; transform: translateY(8px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è */
        .update-toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #00c3ff;
            color: white;
            padding: 1rem 2rem;
            border-radius: 50px;
            font-weight: 600;
            box-shadow: 0 5px 20px rgba(0, 195, 255, 0.5);
            transform: translateY(100px);
            transition: transform 0.3s ease;
            z-index: 3000;
        }

        .update-toast.show {
            transform: translateY(0);
        }

        /* –ö–∞—Ä—Ç–æ—á–∫–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin: 2.5rem 0;
        }

        .person-card {
            background: rgba(20, 28, 45, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(0, 191, 255, 0.2);
            border-radius: 36px;
            padding: 2rem 1.5rem;
            transition: 0.2s;
            box-shadow: 0 20px 30px -10px #00000080;
            position: relative;
        }

        .person-card:hover {
            border-color: #00a6ff;
            transform: translateY(-8px);
            background: rgba(28, 38, 60, 0.9);
        }

        .person-card h3 {
            font-size: 1.8rem;
            color: #00c3ff;
            margin-bottom: 0.5rem;
            outline: none;
        }

        .person-card .rank {
            color: #ffd966;
            font-weight: 600;
            letter-spacing: 0.5px;
            outline: none;
        }

        .person-card .contact {
            margin-top: 1.5rem;
            padding-top: 1rem;
            border-top: 1px dashed #334155;
            color: #b2c9ff;
            outline: none;
        }

        .edit-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: #ffd700;
            color: #0b0e14;
            padding: 0.2rem 0.8rem;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 600;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .person-card:hover .edit-badge {
            opacity: 1;
        }

        .admin-edit-indicator {
            background: rgba(255, 215, 0, 0.2);
            border: 1px dashed #ffd700;
            border-radius: 30px;
            padding: 0.3rem 1rem;
            display: inline-block;
            font-size: 0.8rem;
            color: #ffd700;
            margin-bottom: 1rem;
        }

        /* –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ */
        .invite-block {
            background: linear-gradient(145deg, #002766, #001c4d);
            border-radius: 48px;
            padding: 2.5rem;
            text-align: center;
            border: 1px solid #00c3ff;
            margin: 2rem 0;
        }

        .forum-big-link {
            display: inline-block;
            background: #00c3ff;
            color: #0b0e14;
            font-weight: 800;
            padding: 1.2rem 3rem;
            border-radius: 60px;
            font-size: 1.5rem;
            text-decoration: none;
            box-shadow: 0 10px 30px #00a6ff;
            transition: 0.2s;
            border: 2px solid white;
        }

        .forum-big-link:hover {
            background: #4fd5ff;
            transform: scale(1.02);
            box-shadow: 0 15px 40px #0077ff;
        }

        /* –ó–∞–∫–æ–Ω—ã */
        .laws-container {
            background: rgba(10, 18, 30, 0.8);
            border-radius: 40px;
            padding: 2rem;
            backdrop-filter: blur(8px);
            border: 1px solid #0077ff40;
        }

        .law-tabs {
            display: flex;
            gap: 0.8rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .law-tab {
            background: rgba(0, 150, 255, 0.1);
            border: 1px solid #0077ff60;
            color: #cbd5ff;
            padding: 0.8rem 2.2rem;
            border-radius: 40px;
            font-weight: 700;
            cursor: pointer;
            transition: 0.2s;
        }

        .law-tab.active-law {
            background: #0077ff;
            color: white;
            border-color: #00c3ff;
            box-shadow: 0 0 20px #0077ff;
        }

        .law-content {
            display: none;
            background: #0b1424;
            padding: 2rem;
            border-radius: 28px;
            border-left: 6px solid #00c3ff;
            font-size: 1.1rem;
            line-height: 1.7;
            color: #e0eaff;
            white-space: pre-line;
            max-height: 600px;
            overflow-y: auto;
        }

        .law-content.active-law-content {
            display: block;
        }

        .law-content[contenteditable="true"] {
            outline: 2px dashed #ffd700;
            cursor: text;
        }

        .law-content[contenteditable="true"]:hover {
            background: rgba(255, 215, 0, 0.05);
        }

        /* –ß–∞—Ç —Å –ò–ò */
        .ai-chat {
            background: #0f1a2b;
            border-radius: 40px;
            border: 1px solid #0077ff60;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 600px;
            margin-top: 2rem;
        }

        .chat-msgs {
            flex: 1;
            overflow-y: auto;
            padding: 1.8rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .msg {
            max-width: 80%;
            padding: 0.9rem 1.5rem;
            border-radius: 28px;
            line-height: 1.5;
            white-space: pre-wrap;
            animation: slideMsg 0.2s;
        }

        @keyframes slideMsg {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .user-msg {
            align-self: flex-end;
            background: #0077ff;
            color: white;
            border-bottom-right-radius: 6px;
        }

        .bot-msg {
            align-self: flex-start;
            background: #1e2a44;
            border: 1px solid #00a6ff;
            border-bottom-left-radius: 6px;
            color: #f0f4ff;
        }

        .chat-input-area {
            display: flex;
            padding: 1.5rem;
            background: #0a111f;
            border-top: 2px solid #0077ff;
            gap: 0.8rem;
        }

        .chat-input-area input {
            flex: 1;
            background: #1a253c;
            border: 1px solid #334155;
            border-radius: 50px;
            padding: 1rem 1.8rem;
            color: white;
            font-size: 1rem;
            outline: none;
        }

        .chat-input-area input:focus {
            border-color: #00c3ff;
            box-shadow: 0 0 10px #0077ff66;
        }

        .chat-input-area button {
            background: linear-gradient(145deg, #00c3ff, #0066ff);
            border: none;
            border-radius: 50px;
            padding: 0 2.5rem;
            font-weight: 700;
            color: white;
            cursor: pointer;
            font-size: 1.1rem;
            transition: 0.2s;
            border: 1px solid #89e0ff;
        }

        .chat-input-area button:hover {
            background: #0077ff;
            box-shadow: 0 0 20px #0077ff;
        }

        /* –ü–∞–Ω–µ–ª—å –∑–∞—è–≤–æ–∫ */
        .applications-panel {
            background: rgba(10, 18, 30, 0.8);
            border-radius: 40px;
            padding: 2rem;
            backdrop-filter: blur(8px);
            border: 1px solid #00c3ff;
            margin-top: 2rem;
        }

        .app-form {
            background: #0b1424;
            border-radius: 32px;
            padding: 2rem;
            border: 1px solid #0077ff60;
            margin-bottom: 2rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: #b3d9ff;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .form-group input[type="text"],
        .form-group textarea {
            width: 100%;
            background: #1a253c;
            border: 1px solid #334155;
            border-radius: 20px;
            padding: 1rem 1.5rem;
            color: white;
            font-size: 1rem;
            outline: none;
        }

        .form-group input[type="text"]:focus,
        .form-group textarea:focus {
            border-color: #00c3ff;
            box-shadow: 0 0 10px #0077ff66;
        }

        .form-group textarea {
            min-height: 120px;
            resize: vertical;
        }

        .file-upload-area {
            background: #0f1a2b;
            border: 2px dashed #0077ff;
            border-radius: 24px;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: 0.2s;
        }

        .file-upload-area:hover {
            border-color: #00c3ff;
            background: #1a2a40;
        }

        .file-upload-area input[type="file"] {
            display: none;
        }

        .file-list {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-top: 1rem;
        }

        .file-preview {
            background: #1a253c;
            border-radius: 16px;
            padding: 0.5rem;
            position: relative;
            width: 100px;
            height: 100px;
            object-fit: cover;
            border: 1px solid #0077ff;
        }

        .file-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 12px;
        }

        .remove-file {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ff4444;
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 14px;
            border: 2px solid white;
        }

        .submit-btn {
            background: linear-gradient(145deg, #00c3ff, #0066ff);
            border: none;
            border-radius: 60px;
            padding: 1.2rem 3rem;
            font-weight: 800;
            color: white;
            cursor: pointer;
            font-size: 1.2rem;
            transition: 0.2s;
            border: 1px solid #89e0ff;
            width: 100%;
            margin-top: 1rem;
        }

        .submit-btn:hover {
            background: #0077ff;
            box-shadow: 0 0 30px #0077ff;
        }

        .submit-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            pointer-events: none;
        }

        /* –õ–µ–Ω—Ç–∞ –∑–∞—è–≤–æ–∫ */
        .applications-forum {
            margin-top: 3rem;
        }

        .app-card {
            background: #0b1424;
            border-radius: 28px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 1px solid #0077ff60;
            transition: 0.2s;
            position: relative;
        }

        .app-card:hover {
            border-color: #00c3ff;
            transform: translateX(6px);
        }

        .app-id {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: #1a253c;
            padding: 0.3rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            color: #7f92b0;
            border: 1px solid #334155;
        }

        .app-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            flex-wrap: wrap;
            gap: 1rem;
            padding-right: 100px;
        }

        .app-author {
            color: #00c3ff;
            font-weight: 700;
            font-size: 1.2rem;
        }

        .app-date {
            color: #7f92b0;
            font-size: 0.9rem;
        }

        .app-title {
            font-size: 1.4rem;
            color: white;
            margin-bottom: 0.8rem;
        }

        .app-text {
            color: #b2c9ff;
            line-height: 1.6;
            margin-bottom: 1rem;
            white-space: pre-wrap;
        }

        .app-images {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-top: 1rem;
        }

        .app-image {
            width: 120px;
            height: 120px;
            border-radius: 16px;
            object-fit: cover;
            border: 2px solid #0077ff;
            cursor: pointer;
            transition: 0.2s;
        }

        .app-image:hover {
            transform: scale(1.05);
            border-color: #00c3ff;
        }

        .app-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
            justify-content: flex-end;
        }

        .delete-app-btn {
            background: rgba(255, 68, 68, 0.2);
            border: 1px solid #ff4444;
            color: #ff8888;
            padding: 0.5rem 1.5rem;
            border-radius: 30px;
            font-weight: 600;
            cursor: pointer;
            transition: 0.2s;
            font-size: 0.9rem;
        }

        .delete-app-btn:hover {
            background: #ff4444;
            color: white;
        }

        .delete-app-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
            pointer-events: none;
        }

        .admin-badge {
            background: #ffd700;
            color: #0b0e14;
            padding: 0.2rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-left: 1rem;
        }

        .download-json {
            background: #1a253c;
            border: 1px solid #0077ff;
            border-radius: 40px;
            padding: 0.8rem 2rem;
            color: #b3d9ff;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
            transition: 0.2s;
        }

        .download-json:hover {
            background: #0077ff20;
            border-color: #00c3ff;
        }

        .save-btn {
            background: #1a253c;
            border: 1px solid #00ff88;
            border-radius: 40px;
            padding: 0.8rem 2rem;
            color: #00ff88;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            margin-left: 1rem;
            transition: 0.2s;
        }

        .save-btn:hover {
            background: #00ff8820;
            border-color: #00ff88;
        }

        /* –§—É—Ç–µ—Ä */
        .footer {
            text-align: center;
            padding: 2rem;
            border-top: 1px solid #1e2a44;
            color: #6b7ca0;
            margin-top: 3rem;
        }

        .sync-status {
            background: #1a253c;
            padding: 0.4rem 1.2rem;
            border-radius: 40px;
            display: inline-block;
            font-size: 0.8rem;
            color: #00ff88;
            border: 1px solid #00ff88;
            margin-bottom: 1rem;
        }

        .read-only-indicator {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid #334155;
            border-radius: 30px;
            padding: 0.3rem 1rem;
            display: inline-block;
            font-size: 0.8rem;
            color: #a5b3d1;
            margin-left: 1rem;
        }
    </style>
</head>
<body>
    <div class="update-toast" id="updateToast">üì¢ –ü–æ—è–≤–∏–ª–∏—Å—å –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ</div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
    <div class="modal" id="authModal">
        <div class="modal-content">
            <h2 class="modal-title">üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</h2>
            <input type="text" class="modal-input" id="loginInput" placeholder="–õ–æ–≥–∏–Ω">
            <input type="password" class="modal-input" id="passwordInput" placeholder="–ü–∞—Ä–æ–ª—å">
            <button class="modal-btn" id="loginSubmitBtn">–í–æ–π—Ç–∏</button>
            <div class="modal-error" id="authError">–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å</div>
        </div>
    </div>

    <header class="header">
        <nav class="nav">
            <div class="logo">
                <span class="logo-icon">üöî</span> –ì–ò–ë–î–î –†–û–î–ò–ù–ê –†–ü
            </div>
            <div class="nav-links">
                <button class="nav-btn active" data-page="main">–ì–ª–∞–≤–Ω–∞—è</button>
                <button class="nav-btn" data-page="laws">–ó–∞–∫–æ–Ω—ã</button>
                <button class="nav-btn" data-page="charter">–£—Å—Ç–∞–≤</button>
                <button class="nav-btn" data-page="ai">–ü–æ–º–æ—â–Ω–∏–∫</button>
                <button class="nav-btn" data-page="applications">–ó–∞—è–≤–∫–∏</button>
                
                <!-- –ö–Ω–æ–ø–∫–∞ –≤—Ö–æ–¥–∞/–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ -->
                <div id="authSection">
                    <button class="login-btn" id="showLoginBtn">üîë –í–æ–π—Ç–∏</button>
                </div>
            </div>
        </nav>
    </header>

    <div class="container">
        <!-- –ì–ª–∞–≤–Ω–∞—è -->
        <div id="main" class="page active-page">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 1rem;">
                <div style="text-align: center; flex: 1;">
                    <h1 style="font-size: 3rem; background: linear-gradient(135deg, #89e0ff, #0066ff); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">–ì–æ—Å–∞–≤—Ç–æ–∏–Ω—Å–ø–µ–∫—Ü–∏—è</h1>
                    <p style="color: #a5b3d1; font-size: 1.2rem;">–°–ª—É–∂–∏–º –∑–∞–∫–æ–Ω—É, –∑–∞—â–∏—â–∞–µ–º –ø–æ—Ä—è–¥–æ–∫ –Ω–∞ –¥–æ—Ä–æ–≥–∞—Ö</p>
                </div>
                <button class="save-btn" id="saveStaffBtn" style="display: none;">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
            </div>

            <!-- –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –Ω–∞ —Ñ–æ—Ä—É–º -->
            <div id="inviteContainer" class="invite-block"></div>

            <!-- –ö–æ–Ω—Ç–∞–∫—Ç—ã –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏ (3 —á–µ–ª–æ–≤–µ–∫–∞) -->
            <h2 style="font-size: 2.2rem; margin: 3rem 0 1rem; color: #b3d9ff;">‚ñ™ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ì–ò–ë–î–î</h2>
            <div id="staffContainer" class="cards-grid"></div>
            <div class="sync-status" id="syncStatus">üü¢ –î–∞–Ω–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã</div>
            <span class="read-only-indicator" id="readOnlyIndicator">üëÅÔ∏è –¢–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞</span>
        </div>

        <!-- –ó–∞–∫–æ–Ω—ã -->
        <div id="laws" class="page">
            <h2 style="font-size: 2.5rem; color: #b3d9ff; margin-bottom: 1.5rem;">üìú –ö–æ–¥–µ–∫—Å—ã –†–û–î–ò–ù–ê –†–ü</h2>
            <div class="laws-container">
                <div class="law-tabs">
                    <div class="law-tab active-law" data-law="uk">–£–ö –†–§</div>
                    <div class="law-tab" data-law="ak">–ê–ö –†–§</div>
                    <div class="law-tab" data-law="pdd">–ü–î–î</div>
                </div>
                <div id="ukContent" class="law-content active-law-content"></div>
                <div id="akContent" class="law-content"></div>
                <div id="pddContent" class="law-content"></div>
            </div>
            <span class="read-only-indicator" id="lawsReadOnlyIndicator">üëÅÔ∏è –¢–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞</span>
        </div>

        <!-- –£—Å—Ç–∞–≤ -->
        <div id="charter" class="page">
            <h2 style="font-size: 2.5rem; color: #b3d9ff; margin-bottom: 1.5rem;">üìã –£—Å—Ç–∞–≤ –ì–ò–ë–î–î –†–û–î–ò–ù–ê –†–ü</h2>
            <div class="laws-container">
                <div class="law-tabs">
                    <div class="law-tab active-law" data-charter="general">–û–±—â–∏–µ –ø–æ–ª–æ–∂–µ–Ω–∏—è</div>
                    <div class="law-tab" data-charter="ranks">–†–∞–Ω–≥–∏ –∏ –ø–æ–≤—ã—à–µ–Ω–∏–µ</div>
                    <div class="law-tab" data-charter="rules">–ü—Ä–∞–≤–∏–ª–∞ –∏ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏</div>
                </div>
                <div id="generalContent" class="law-content active-law-content"></div>
                <div id="ranksContent" class="law-content"></div>
                <div id="rulesContent" class="law-content"></div>
            </div>
            <span class="read-only-indicator" id="charterReadOnlyIndicator">üëÅÔ∏è –¢–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞</span>
        </div>

        <!-- –ò–ò –ü–æ–º–æ—â–Ω–∏–∫ -->
        <div id="ai" class="page">
            <h2 style="font-size: 2.5rem; color: #b3d9ff; margin-bottom: 1rem;">üß† –ù–µ–π—Ä–æ—Å–µ—Ç—å-–ø–æ–º–æ—â–Ω–∏–∫</h2>
            <div class="ai-chat" id="chatWidget">
                <div class="chat-msgs" id="chatMessages">
                    <div class="msg bot-msg">–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –Ø –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –ì–ò–ë–î–î –†–û–î–ò–ù–ê –†–ü. –ó–∞–¥–∞–π—Ç–µ –ª—é–±–æ–π –≤–æ–ø—Ä–æ—Å –æ –∑–∞–∫–æ–Ω–∞—Ö, —É—Å—Ç–∞–≤–µ, —Ä–∞–Ω–≥–∞—Ö, —à—Ç—Ä–∞—Ñ–∞—Ö, —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞—Ö –∏–ª–∏ —Ä–∞–±–æ—Ç–µ —Å–∞–π—Ç–∞. –Ø –ø–æ—Å—Ç–∞—Ä–∞—é—Å—å –ø–æ–º–æ—á—å!</div>
                </div>
                <div class="chat-input-area">
                    <input type="text" id="chatInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å...">
                    <button id="sendChatBtn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                </div>
            </div>
        </div>

        <!-- –ü–∞–Ω–µ–ª—å –∑–∞—è–≤–æ–∫ -->
        <div id="applications" class="page">
            <h2 style="font-size: 2.5rem; color: #b3d9ff; margin-bottom: 1rem;">üìã –ü–∞–Ω–µ–ª—å –∑–∞—è–≤–æ–∫</h2>
            
            <div class="applications-panel">
                <!-- –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞—è–≤–∫–∏ (–¥–æ—Å—Ç—É–ø–Ω–∞ –≤—Å–µ–º) -->
                <div class="app-form">
                    <h3 style="color: #00c3ff; margin-bottom: 1.5rem;">–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É</h3>
                    
                    <div class="form-group">
                        <label>–ê–≤—Ç–æ—Ä</label>
                        <input type="text" id="appAuthor" placeholder="–í–∞—à –Ω–∏–∫–Ω–µ–π–º" value="–ì–æ—Å—Ç—å">
                    </div>

                    <div class="form-group">
                        <label>–ó–∞–≥–æ–ª–æ–≤–æ–∫</label>
                        <input type="text" id="appTitle" placeholder="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ">
                    </div>

                    <div class="form-group">
                        <label>–¢–µ–∫—Å—Ç –∑–∞—è–≤–∫–∏</label>
                        <textarea id="appText" placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ..."></textarea>
                    </div>

                    <div class="form-group">
                        <label>–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ (PNG, JPG)</label>
                        <div class="file-upload-area" id="fileUploadArea">
                            <input type="file" id="fileInput" multiple accept="image/png, image/jpeg, image/jpg">
                            <p>üëÜ –ù–∞–∂–º–∏—Ç–µ –∏–ª–∏ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª—ã —Å—é–¥–∞</p>
                            <div class="file-list" id="fileList"></div>
                        </div>
                    </div>

                    <button class="submit-btn" id="submitAppBtn">üì® –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</button>
                </div>

                <!-- –õ–µ–Ω—Ç–∞ –∑–∞—è–≤–æ–∫ (—É–¥–∞–ª—è—Ç—å –º–æ–∂–µ—Ç —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω) -->
                <div class="applications-forum">
                    <h3 style="color: #00c3ff; margin-bottom: 1.5rem;">üìå –õ–µ–Ω—Ç–∞ –∑–∞—è–≤–æ–∫</h3>
                    <div id="applicationsList"></div>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <p>¬© 2026 –ì–ò–ë–î–î –†–û–î–ò–ù–ê –†–ü. –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –ø–æ—Ä—Ç–∞–ª.</p>
    </footer>

    <script>
        (function() {
            // ---------- –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø ----------
            const STORAGE_KEY = 'gibdd_portal_data';
            const UPDATE_KEY = 'gibdd_last_update';
            const ADMIN_LOGIN = 'admin';
            const ADMIN_PASSWORD = 'admin5765';
            
            // ---------- –ë–ê–ó–ê –î–ê–ù–ù–´–• –ü–û –£–ú–û–õ–ß–ê–ù–ò–Æ ----------
            const defaultData = {
                forum: {
                    title: "–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Ñ–æ—Ä—É–º –ì–ò–ë–î–î –†–û–î–ò–ù–ê –†–ü",
                    link: "https://forum.rodina-rp.com/forums/163/",
                    description: "–û–±—Å—É–∂–¥–µ–Ω–∏–µ, –≤–æ–ø—Ä–æ—Å—ã, –Ω–∞–≥—Ä–∞–¥—ã"
                },
                staff: [
                    { name: "–ê–ª–µ–∫—Å–µ–π –í–æ—Ä–æ–Ω–æ–≤", rank: "–ù–∞—á–∞–ª—å–Ω–∏–∫ –ì–ò–ë–î–î", contact: "@voronov", phone: "+7 (900) 123-45-67" },
                    { name: "–î–º–∏—Ç—Ä–∏–π –°–æ–∫–æ–ª–æ–≤", rank: "–ó–∞–º. –Ω–∞—á–∞–ª—å–Ω–∏–∫–∞", contact: "@sokolov", phone: "+7 (910) 765-43-21" },
                    { name: "–ï–∫–∞—Ç–µ—Ä–∏–Ω–∞ –í–æ–ª–∫–æ–≤–∞", rank: "–ò–Ω—Å–ø–µ–∫—Ç–æ—Ä", contact: "@volkova", phone: "+7 (920) 555-22-33" }
                ],
                laws: {
                    uk: "**–£–≥–æ–ª–æ–≤–Ω—ã–π –∫–æ–¥–µ–∫—Å –†–§**\n\n–°—Ç–∞—Ç—å—è 158. –ö—Ä–∞–∂–∞\n–°—Ç–∞—Ç—å—è 264. –ù–∞—Ä—É—à–µ–Ω–∏–µ –ü–î–î\n–°—Ç–∞—Ç—å—è 319. –û—Å–∫–æ—Ä–±–ª–µ–Ω–∏–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—è –≤–ª–∞—Å—Ç–∏",
                    ak: "**–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π –∫–æ–¥–µ–∫—Å**\n\n–°—Ç–∞—Ç—å—è 12.6 - –†–µ–º–Ω–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏\n–°—Ç–∞—Ç—å—è 12.8 - –ù–µ—Ç—Ä–µ–∑–≤–æ–µ –≤–æ–∂–¥–µ–Ω–∏–µ\n–°—Ç–∞—Ç—å—è 12.9 - –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏",
                    pdd: "**–ü—Ä–∞–≤–∏–ª–∞ –¥–æ—Ä–æ–∂–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è**\n\n1. –°–∫–æ—Ä–æ—Å—Ç–Ω–æ–π —Ä–µ–∂–∏–º: 60/90/110\n2. –ü–æ–≤–æ—Ä–æ—Ç–Ω–∏–∫–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã\n3. –ü–∞—Ä–∫–æ–≤–∫–∞ –∑–∞–ø—Ä–µ—â–µ–Ω–∞"
                },
                charter: {
                    general: "**–û–±—â–∏–µ –ø–æ–ª–æ–∂–µ–Ω–∏—è**\n\n–°—Ç–∞—Ç—å—è 1. –ì–ò–ë–î–î –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–æ—Ä–æ–∂–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è.\n–°—Ç–∞—Ç—å—è 2. –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏: —Å–æ–±–ª—é–¥–µ–Ω–∏–µ –ü–î–î, –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞.",
                    ranks: "**–†–∞–Ω–≥–∏ –∏ –ø–æ–≤—ã—à–µ–Ω–∏–µ**\n\n1 —Ä–∞–Ω–≥ - –°—Ç–∞–∂—ë—Ä\n2 —Ä–∞–Ω–≥ - –ò–Ω—Å–ø–µ–∫—Ç–æ—Ä\n3 —Ä–∞–Ω–≥ - –õ–µ–π—Ç–µ–Ω–∞–Ω—Ç\n4 —Ä–∞–Ω–≥ - –ö–∞–ø–∏—Ç–∞–Ω",
                    rules: "**–ü—Ä–∞–≤–∏–ª–∞ –∏ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏**\n\n–û–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏: –∑–Ω–∞—Ç—å –∑–∞–∫–æ–Ω—ã, –±—ã—Ç—å –≤–µ–∂–ª–∏–≤—ã–º.\n–ó–∞–ø—Ä–µ—Ç—ã: –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ–º."
                },
                applications: []
            };

            // ---------- –°–û–°–¢–û–Ø–ù–ò–ï ----------
            let database = JSON.parse(JSON.stringify(defaultData));
            let lastUpdate = 0;
            let currentUser = null;
            let updateCheckInterval = null;
            let autoSaveTimer = null;

            // ---------- –≠–õ–ï–ú–ï–ù–¢–´ ----------
            const updateToast = document.getElementById('updateToast');
            const authModal = document.getElementById('authModal');
            const showLoginBtn = document.getElementById('showLoginBtn');
            const loginInput = document.getElementById('loginInput');
            const passwordInput = document.getElementById('passwordInput');
            const loginSubmitBtn = document.getElementById('loginSubmitBtn');
            const authError = document.getElementById('authError');
            const authSection = document.getElementById('authSection');
            const saveStaffBtn = document.getElementById('saveStaffBtn');
            const syncStatus = document.getElementById('syncStatus');
            const readOnlyIndicator = document.getElementById('readOnlyIndicator');
            const lawsReadOnlyIndicator = document.getElementById('lawsReadOnlyIndicator');
            const charterReadOnlyIndicator = document.getElementById('charterReadOnlyIndicator');

            // ---------- –ó–ê–ì–†–£–ó–ö–ê –î–ê–ù–ù–´–• ----------
            function loadData() {
                try {
                    const saved = localStorage.getItem(STORAGE_KEY);
                    if (saved) {
                        database = JSON.parse(saved);
                    } else {
                        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
                        database = JSON.parse(JSON.stringify(defaultData));
                        saveData(false);
                    }
                    lastUpdate = Date.now();
                    localStorage.setItem(UPDATE_KEY, lastUpdate.toString());
                } catch (e) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', e);
                    database = JSON.parse(JSON.stringify(defaultData));
                }
                renderAll();
            }

            // ---------- –°–û–•–†–ê–ù–ï–ù–ò–ï –î–ê–ù–ù–´–• ----------
            function saveData(showToast = true) {
                try {
                    localStorage.setItem(STORAGE_KEY, JSON.stringify(database));
                    lastUpdate = Date.now();
                    localStorage.setItem(UPDATE_KEY, lastUpdate.toString());
                    if (showToast) {
                        syncStatus.innerHTML = 'üü¢ –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã';
                        setTimeout(() => {
                            syncStatus.innerHTML = 'üü¢ –î–∞–Ω–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã';
                        }, 2000);
                    }
                } catch (e) {
                    console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:', e);
                }
            }

            // ---------- –ü–†–û–í–ï–†–ö–ê –û–ë–ù–û–í–õ–ï–ù–ò–ô ----------
            function checkForUpdates() {
                const storedUpdate = localStorage.getItem(UPDATE_KEY);
                if (storedUpdate && parseInt(storedUpdate) > lastUpdate) {
                    loadData();
                    updateToast.classList.add('show');
                    setTimeout(() => {
                        updateToast.classList.remove('show');
                    }, 3000);
                }
            }

            // ---------- –ó–ê–ü–£–°–ö –ü–†–û–í–ï–†–ö–ò ----------
            function startUpdateChecker() {
                if (updateCheckInterval) clearInterval(updateCheckInterval);
                updateCheckInterval = setInterval(checkForUpdates, 2000);
            }

            // ---------- –û–ë–ù–û–í–õ–ï–ù–ò–ï UI –í –ó–ê–í–ò–°–ò–ú–û–°–¢–ò –û–¢ –ü–†–ê–í ----------
            function updateUIPermissions() {
                const isAdmin = !!currentUser;
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º/—Å–∫—Ä—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Ä–µ–∂–∏–º–∞
                if (isAdmin) {
                    readOnlyIndicator.style.display = 'none';
                    lawsReadOnlyIndicator.style.display = 'none';
                    charterReadOnlyIndicator.style.display = 'none';
                    
                    // –î–µ–ª–∞–µ–º –∑–∞–∫–æ–Ω—ã –∏ —É—Å—Ç–∞–≤ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã–º–∏
                    document.querySelectorAll('.law-content').forEach(el => {
                        el.contentEditable = true;
                    });
                    
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
                    saveStaffBtn.style.display = 'inline-flex';
                } else {
                    readOnlyIndicator.style.display = 'inline-block';
                    lawsReadOnlyIndicator.style.display = 'inline-block';
                    charterReadOnlyIndicator.style.display = 'inline-block';
                    
                    // –î–µ–ª–∞–µ–º –∑–∞–∫–æ–Ω—ã –∏ —É—Å—Ç–∞–≤ —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è
                    document.querySelectorAll('.law-content').forEach(el => {
                        el.contentEditable = false;
                    });
                    
                    // –°–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
                    saveStaffBtn.style.display = 'none';
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –∫–∞—Ä—Ç–æ—á–∫–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
                renderStaffCards();
            }

            // ---------- –†–ï–ù–î–ï–† –ö–ê–†–¢–û–ß–ï–ö –°–û–¢–†–£–î–ù–ò–ö–û–í ----------
            function renderStaffCards() {
                const staffContainer = document.getElementById('staffContainer');
                const isAdmin = !!currentUser;
                
                staffContainer.innerHTML = database.staff.map((person, index) => `
                    <div class="person-card">
                        <div class="edit-badge">${isAdmin ? '‚úé –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å' : 'üëÅÔ∏è –ü—Ä–æ—Å–º–æ—Ç—Ä'}</div>
                        <h3 ${isAdmin ? 'contenteditable="true" class="staff-name"' : ''}>${person.name}</h3>
                        <div class="rank" ${isAdmin ? 'contenteditable="true" class="staff-rank"' : ''}>${person.rank}</div>
                        <div class="contact" ${isAdmin ? 'contenteditable="true" class="staff-contact"' : ''}>üì® ${person.contact}<br>üìû ${person.phone}</div>
                    </div>
                `).join('');
            }

            // ---------- –†–ï–ù–î–ï–† –í–°–ï–• –î–ê–ù–ù–´–• ----------
            function renderAll() {
                // –§–æ—Ä—É–º
                document.getElementById('inviteContainer').innerHTML = `
                    <h3 style="color:white; font-size: 2rem; margin-bottom: 1rem;">üì¢ ${database.forum.title}</h3>
                    <p style="color:#cce5ff; margin-bottom: 1.5rem;">${database.forum.description}</p>
                    <a href="${database.forum.link}" target="_blank" class="forum-big-link">üö¶ –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Ñ–æ—Ä—É–º</a>
                `;

                // –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏
                renderStaffCards();

                // –ó–∞–∫–æ–Ω—ã
                document.getElementById('ukContent').innerHTML = database.laws.uk.replace(/\n/g, '<br>');
                document.getElementById('akContent').innerHTML = database.laws.ak.replace(/\n/g, '<br>');
                document.getElementById('pddContent').innerHTML = database.laws.pdd.replace(/\n/g, '<br>');

                // –£—Å—Ç–∞–≤
                document.getElementById('generalContent').innerHTML = database.charter.general.replace(/\n/g, '<br>');
                document.getElementById('ranksContent').innerHTML = database.charter.ranks.replace(/\n/g, '<br>');
                document.getElementById('rulesContent').innerHTML = database.charter.rules.replace(/\n/g, '<br>');

                // –ó–∞—è–≤–∫–∏
                renderApplications();

                // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–∞–≤–∞
                updateUIPermissions();
            }

            // ---------- –†–ï–ù–î–ï–† –ó–ê–Ø–í–û–ö ----------
            function renderApplications() {
                const container = document.getElementById('applicationsList');
                if (!database.applications || database.applications.length === 0) {
                    container.innerHTML = '<p style="color: #7f92b0;">–ü–æ–∫–∞ –Ω–µ—Ç –∑–∞—è–≤–æ–∫</p>';
                    return;
                }

                container.innerHTML = database.applications.map(app => `
                    <div class="app-card" data-app-id="${app.id}">
                        <div class="app-id">ID: ${app.id}</div>
                        <div class="app-header">
                            <span class="app-author">üë§ ${app.author}</span>
                            <span class="app-date">${app.date}</span>
                        </div>
                        <div class="app-title">${app.title}</div>
                        <div class="app-text">${app.text}</div>
                        ${app.images && app.images.length ? `
                            <div class="app-images">
                                ${app.images.map(img => `<img src="${img}" class="app-image" onclick="window.open(this.src)">`).join('')}
                            </div>
                        ` : ''}
                        ${currentUser ? `
                            <div class="app-actions">
                                <button class="delete-app-btn" onclick="deleteApplication(${app.id})">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –∑–∞—è–≤–∫—É</button>
                            </div>
                        ` : ''}
                    </div>
                `).join('');
            }

            // ---------- –ê–í–¢–û–†–ò–ó–ê–¶–ò–Ø ----------
            function updateAuthUI() {
                if (currentUser) {
                    authSection.innerHTML = `
                        <div class="user-info">
                            <span class="user-name">üë§ ${currentUser}</span>
                            <span class="admin-badge">–ê–¥–º–∏–Ω</span>
                            <button class="logout-btn" id="logoutBtn">‚úï</button>
                        </div>
                    `;
                    document.getElementById('logoutBtn').addEventListener('click', logout);
                } else {
                    authSection.innerHTML = '<button class="login-btn" id="showLoginBtn">üîë –í–æ–π—Ç–∏</button>';
                    document.getElementById('showLoginBtn').addEventListener('click', showAuthModal);
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º UI —Å —É—á–µ—Ç–æ–º –ø—Ä–∞–≤
                updateUIPermissions();
                
                // –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞—è–≤–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–∞ –≤—Å–µ–º, –Ω–æ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π
                document.getElementById('submitAppBtn').disabled = false;
            }

            function showAuthModal() {
                loginInput.value = '';
                passwordInput.value = '';
                authError.classList.remove('show');
                authModal.classList.add('active');
            }

            function hideAuthModal() {
                authModal.classList.remove('active');
            }

            function login() {
                const login = loginInput.value.trim();
                const password = passwordInput.value.trim();
                
                if (login === ADMIN_LOGIN && password === ADMIN_PASSWORD) {
                    currentUser = login;
                    localStorage.setItem('gibdd_user', login);
                    hideAuthModal();
                    updateAuthUI();
                } else {
                    authError.classList.add('show');
                }
            }

            function logout() {
                currentUser = null;
                localStorage.removeItem('gibdd_user');
                updateAuthUI();
            }

            // ---------- –°–û–•–†–ê–ù–ï–ù–ò–ï –ò–ó–ú–ï–ù–ï–ù–ò–ô –°–û–¢–†–£–î–ù–ò–ö–û–í ----------
            function saveStaffChanges() {
                if (!currentUser) return;
                
                const nameElements = document.querySelectorAll('.staff-name');
                const rankElements = document.querySelectorAll('.staff-rank');
                const contactElements = document.querySelectorAll('.staff-contact');
                
                database.staff = database.staff.map((person, index) => ({
                    name: nameElements[index]?.innerText.trim() || person.name,
                    rank: rankElements[index]?.innerText.trim() || person.rank,
                    contact: contactElements[index]?.innerText.match(/üì® (.+)/)?.[1]?.trim() || person.contact,
                    phone: contactElements[index]?.innerText.match(/üìû (.+)/)?.[1]?.trim() || person.phone
                }));
                
                saveData();
                alert('–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!');
            }

            // ---------- –ê–í–¢–û–°–û–•–†–ê–ù–ï–ù–ò–ï –ó–ê–ö–û–ù–û–í –ò –£–°–¢–ê–í–ê ----------
            function setupAutoSave() {
                const lawContents = ['ukContent', 'akContent', 'pddContent'];
                const charterContents = ['generalContent', 'ranksContent', 'rulesContent'];
                
                [...lawContents, ...charterContents].forEach(id => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.addEventListener('input', () => {
                            if (!currentUser) return; // –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω –º–æ–∂–µ—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å
                            
                            if (autoSaveTimer) clearTimeout(autoSaveTimer);
                            autoSaveTimer = setTimeout(() => {
                                // –û–±–Ω–æ–≤–ª—è–µ–º database –∏–∑ DOM
                                if (lawContents.includes(id)) {
                                    const lawKey = id.replace('Content', '');
                                    database.laws[lawKey] = element.innerText.replace(/<br>/g, '\n');
                                } else if (charterContents.includes(id)) {
                                    const charterKey = id.replace('Content', '');
                                    database.charter[charterKey] = element.innerText.replace(/<br>/g, '\n');
                                }
                                saveData();
                                syncStatus.innerHTML = 'üü¢ –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...';
                                setTimeout(() => {
                                    syncStatus.innerHTML = 'üü¢ –î–∞–Ω–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã';
                                }, 1000);
                            }, 1500);
                        });
                    }
                });
            }

            // ---------- –£–î–ê–õ–ï–ù–ò–ï –ó–ê–Ø–í–ö–ò ----------
            window.deleteApplication = function(appId) {
                if (!currentUser) return;
                
                if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –∑–∞—è–≤–∫—É?')) {
                    database.applications = database.applications.filter(app => app.id !== appId);
                    saveData();
                    renderApplications();
                }
            };

            // ---------- –ù–ê–í–ò–ì–ê–¶–ò–Ø ----------
            function setupNavigation() {
                const pages = {
                    main: document.getElementById('main'),
                    laws: document.getElementById('laws'),
                    charter: document.getElementById('charter'),
                    ai: document.getElementById('ai'),
                    applications: document.getElementById('applications')
                };
                
                document.querySelectorAll('.nav-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const pageId = btn.dataset.page;
                        if (!pageId) return;
                        
                        Object.values(pages).forEach(p => p?.classList.remove('active-page'));
                        pages[pageId]?.classList.add('active-page');
                        
                        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                    });
                });
            }

            // ---------- –í–ö–õ–ê–î–ö–ò –ó–ê–ö–û–ù–û–í ----------
            function setupLawTabs() {
                const lawTabs = document.querySelectorAll('[data-law]');
                const lawContents = {
                    uk: document.getElementById('ukContent'),
                    ak: document.getElementById('akContent'),
                    pdd: document.getElementById('pddContent')
                };

                lawTabs.forEach(tab => {
                    tab.addEventListener('click', () => {
                        lawTabs.forEach(t => t.classList.remove('active-law'));
                        tab.classList.add('active-law');
                        
                        Object.values(lawContents).forEach(c => c?.classList.remove('active-law-content'));
                        lawContents[tab.dataset.law]?.classList.add('active-law-content');
                    });
                });
            }

            // ---------- –í–ö–õ–ê–î–ö–ò –£–°–¢–ê–í–ê ----------
            function setupCharterTabs() {
                const charterTabs = document.querySelectorAll('[data-charter]');
                const charterContents = {
                    general: document.getElementById('generalContent'),
                    ranks: document.getElementById('ranksContent'),
                    rules: document.getElementById('rulesContent')
                };

                charterTabs.forEach(tab => {
                    tab.addEventListener('click', () => {
                        charterTabs.forEach(t => t.classList.remove('active-law'));
                        tab.classList.add('active-law');
                        
                        Object.values(charterContents).forEach(c => c?.classList.remove('active-law-content'));
                        charterContents[tab.dataset.charter]?.classList.add('active-law-content');
                    });
                });
            }

            // ---------- –ß–ê–¢ ----------
            function setupChat() {
                const chatMessages = document.getElementById('chatMessages');
                const chatInput = document.getElementById('chatInput');
                const sendBtn = document.getElementById('sendChatBtn');

                function addMessage(text, sender) {
                    const msgDiv = document.createElement('div');
                    msgDiv.className = `msg ${sender === 'user' ? 'user-msg' : 'bot-msg'}`;
                    msgDiv.textContent = text;
                    chatMessages.appendChild(msgDiv);
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                }

                function getBotReply(question) {
                    const q = question.toLowerCase().trim();
                    
                    if (q.includes('–ø—Ä–∏–≤–µ—Ç') || q.includes('–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ')) {
                        return '–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –Ø –ø–æ–º–æ—â–Ω–∏–∫ –ì–ò–ë–î–î. –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?';
                    }
                    
                    if (q.includes('–∑–∞–∫–æ–Ω') || q.includes('—É–∫') || q.includes('–∞–∫') || q.includes('–ø–¥–¥')) {
                        return '–ó–∞–∫–æ–Ω—ã –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫–µ "–ó–∞–∫–æ–Ω—ã". –¢–∞–º –µ—Å—Ç—å –£–ö, –ê–ö –∏ –ü–î–î.';
                    }
                    
                    if (q.includes('—É—Å—Ç–∞–≤') || q.includes('—Ä–∞–Ω–≥') || q.includes('–ø–æ–≤—ã—à–µ–Ω–∏–µ')) {
                        return '–£—Å—Ç–∞–≤ –∏ —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–Ω–≥–æ–≤ –Ω–∞ –≤–∫–ª–∞–¥–∫–µ "–£—Å—Ç–∞–≤".';
                    }
                    
                    if (q.includes('—Å–æ—Ç—Ä—É–¥–Ω–∏–∫') || q.includes('—Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ')) {
                        return database.staff.map(s => `${s.name} - ${s.rank}`).join('\n');
                    }
                    
                    if (q.includes('–∑–∞—è–≤–∫')) {
                        return `–í—Å–µ–≥–æ –∑–∞—è–≤–æ–∫: ${database.applications.length}`;
                    }
                    
                    if (q.includes('—Ñ–æ—Ä—É–º')) {
                        return database.forum.title + ': ' + database.forum.link;
                    }
                    
                    if (q.includes('—Å–ø–∞—Å–∏–±–æ')) {
                        return '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞! –û–±—Ä–∞—â–∞–π—Ç–µ—Å—å –µ—â—ë.';
                    }
                    
                    return '–Ø –º–æ–≥—É —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –æ –∑–∞–∫–æ–Ω–∞—Ö, —É—Å—Ç–∞–≤–µ, —Ä–∞–Ω–≥–∞—Ö, —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞—Ö –∏ –∑–∞—è–≤–∫–∞—Ö. –ß—Ç–æ –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç?';
                }

                sendBtn.addEventListener('click', () => {
                    const text = chatInput.value.trim();
                    if (!text) return;
                    
                    addMessage(text, 'user');
                    chatInput.value = '';
                    
                    setTimeout(() => {
                        const reply = getBotReply(text);
                        addMessage(reply, 'bot');
                    }, 500);
                });

                chatInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') sendBtn.click();
                });
            }

            // ---------- –ó–ê–ì–†–£–ó–ö–ê –§–ê–ô–õ–û–í ----------
            function setupFileUpload() {
                const fileInput = document.getElementById('fileInput');
                const fileList = document.getElementById('fileList');
                const uploadArea = document.getElementById('fileUploadArea');
                let selectedFiles = [];

                function handleFiles(files) {
                    const imageFiles = Array.from(files).filter(f => f.type.startsWith('image/'));
                    selectedFiles = [...selectedFiles, ...imageFiles];
                    renderFilePreviews();
                }

                function renderFilePreviews() {
                    fileList.innerHTML = '';
                    selectedFiles.forEach((file, index) => {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            const previewDiv = document.createElement('div');
                            previewDiv.className = 'file-preview';
                            previewDiv.innerHTML = `
                                <img src="${e.target.result}" alt="preview">
                                <div class="remove-file" data-index="${index}">√ó</div>
                            `;
                            fileList.appendChild(previewDiv);
                            
                            previewDiv.querySelector('.remove-file').addEventListener('click', function() {
                                selectedFiles.splice(index, 1);
                                renderFilePreviews();
                            });
                        };
                        reader.readAsDataURL(file);
                    });
                }

                fileInput.addEventListener('change', (e) => handleFiles(e.target.files));
                
                uploadArea.addEventListener('click', () => fileInput.click());
                
                uploadArea.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    uploadArea.style.background = '#1a2a40';
                });
                
                uploadArea.addEventListener('dragleave', () => {
                    uploadArea.style.background = '#0f1a2b';
                });
                
                uploadArea.addEventListener('drop', (e) => {
                    e.preventDefault();
                    uploadArea.style.background = '#0f1a2b';
                    handleFiles(Array.from(e.dataTransfer.files));
                });

                // –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞—è–≤–∫–∏
                document.getElementById('submitAppBtn').addEventListener('click', () => {
                    const author = document.getElementById('appAuthor').value.trim() || '–ì–æ—Å—Ç—å';
                    const title = document.getElementById('appTitle').value.trim();
                    const text = document.getElementById('appText').value.trim();

                    if (!title || !text) {
                        alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ —Ç–µ–∫—Å—Ç –∑–∞—è–≤–∫–∏');
                        return;
                    }

                    const imagePromises = selectedFiles.map(file => {
                        return new Promise((resolve) => {
                            const reader = new FileReader();
                            reader.onload = (e) => resolve(e.target.result);
                            reader.readAsDataURL(file);
                        });
                    });

                    Promise.all(imagePromises).then(images => {
                        const newApp = {
                            id: Date.now(),
                            author: author,
                            title: title,
                            text: text,
                            images: images,
                            date: new Date().toLocaleString()
                        };

                        if (!database.applications) {
                            database.applications = [];
                        }

                        database.applications.unshift(newApp);
                        saveData();
                        
                        document.getElementById('appTitle').value = '';
                        document.getElementById('appText').value = '';
                        selectedFiles = [];
                        renderFilePreviews();
                        renderApplications();
                        
                        alert('–ó–∞—è–≤–∫–∞ —Å–æ–∑–¥–∞–Ω–∞!');
                    });
                });
            }

            // ---------- –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ----------
            function init() {
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ
                loadData();
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é —Å–µ—Å—Å–∏—é
                if (localStorage.getItem('gibdd_user')) {
                    currentUser = localStorage.getItem('gibdd_user');
                }
                
                // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                setupNavigation();
                setupLawTabs();
                setupCharterTabs();
                setupChat();
                setupFileUpload();
                setupAutoSave();
                
                // –û–±–Ω–æ–≤–ª—è–µ–º UI –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
                updateAuthUI();
                
                // –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
                startUpdateChecker();
                
                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
                if (showLoginBtn) showLoginBtn.addEventListener('click', showAuthModal);
                loginSubmitBtn.addEventListener('click', login);
                loginInput.addEventListener('keypress', (e) => e.key === 'Enter' && login());
                passwordInput.addEventListener('keypress', (e) => e.key === 'Enter' && login());
                authModal.addEventListener('click', (e) => e.target === authModal && hideAuthModal());
                
                // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
                saveStaffBtn.addEventListener('click', saveStaffChanges);
                
                // –û—á–∏—Å—Ç–∫–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –ø—Ä–∏ —É—Ö–æ–¥–µ
                window.addEventListener('beforeunload', () => {
                    if (updateCheckInterval) clearInterval(updateCheckInterval);
                });
            }

            // –ó–∞–ø—É—Å–∫
            init();
        })();
    </script>
</body>
</html>
