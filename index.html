<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì–ò–ë–î–î –†–û–î–ò–ù–ê –†–ü | –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –ø–æ—Ä—Ç–∞–ª</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', 'Segoe UI', system-ui, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #0c0f16 0%, #1b212e 100%);
            color: #eef2f8;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            background: rgba(10, 14, 23, 0.9);
            backdrop-filter: blur(12px);
            border-bottom: 2px solid rgba(0, 191, 255, 0.3);
            padding: 0.8rem 2rem;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .nav {
            max-width: 1300px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .logo {
            font-weight: 800;
            font-size: 1.8rem;
            background: linear-gradient(45deg, #00c3ff, #0077ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo-icon {
            background: #0077ff;
            border-radius: 12px;
            padding: 5px 10px;
            font-size: 1.2rem;
            color: white;
            -webkit-text-fill-color: white;
        }

        .nav-links {
            display: flex;
            gap: 0.3rem;
            flex-wrap: wrap;
            align-items: center;
        }

        .nav-btn {
            background: transparent;
            border: none;
            color: #a5b3d1;
            padding: 0.6rem 1.5rem;
            border-radius: 40px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid transparent;
        }

        .nav-btn:hover {
            color: #00c3ff;
            background: rgba(0, 191, 255, 0.1);
            border-color: rgba(0, 191, 255, 0.4);
        }

        .nav-btn.active {
            background: linear-gradient(145deg, #00c3ff, #0066ff);
            color: white;
            box-shadow: 0 8px 20px rgba(0, 123, 255, 0.5);
        }

        .login-btn {
            background: rgba(255, 215, 0, 0.15);
            border: 1px solid #ffd700;
            color: #ffd700;
            padding: 0.6rem 1.5rem;
            border-radius: 40px;
            font-weight: 600;
            cursor: pointer;
            margin-left: 1rem;
        }

        .login-btn:hover {
            background: #ffd700;
            color: #0b0e14;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: #1a253c;
            border-radius: 40px;
            padding: 2.5rem;
            max-width: 400px;
            width: 90%;
            border: 2px solid #0077ff;
            box-shadow: 0 20px 40px rgba(0, 119, 255, 0.3);
        }

        .modal-title {
            font-size: 2rem;
            color: #00c3ff;
            margin-bottom: 2rem;
            text-align: center;
        }

        .modal-input {
            width: 100%;
            background: #0f1a2b;
            border: 1px solid #334155;
            border-radius: 30px;
            padding: 1rem 1.5rem;
            color: white;
            font-size: 1rem;
            margin-bottom: 1rem;
            outline: none;
        }

        .modal-input:focus {
            border-color: #00c3ff;
        }

        .modal-btn {
            width: 100%;
            background: linear-gradient(145deg, #00c3ff, #0066ff);
            border: none;
            border-radius: 30px;
            padding: 1rem;
            color: white;
            font-weight: 700;
            cursor: pointer;
            margin-top: 1rem;
        }

        .modal-error {
            color: #ff6b6b;
            text-align: center;
            margin-top: 1rem;
            display: none;
        }

        .modal-error.show {
            display: block;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
            background: rgba(255, 215, 0, 0.1);
            padding: 0.5rem 1.5rem;
            border-radius: 40px;
            border: 1px solid #ffd700;
        }

        .user-name {
            color: #ffd700;
            font-weight: 600;
        }

        .logout-btn {
            background: transparent;
            border: none;
            color: #a5b3d1;
            cursor: pointer;
            font-size: 1.2rem;
            padding: 0 0.5rem;
        }

        .logout-btn:hover {
            color: #ff6b6b;
        }

        .container {
            max-width: 1300px;
            margin: 2rem auto;
            padding: 0 2rem;
            flex: 1;
            width: 100%;
        }

        .page {
            display: none;
            animation: fadePage 0.3s ease;
        }

        .page.active-page {
            display: block;
        }

        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin: 2.5rem 0;
        }

        .person-card {
            background: rgba(20, 28, 45, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(0, 191, 255, 0.2);
            border-radius: 36px;
            padding: 2rem 1.5rem;
            transition: 0.2s;
            box-shadow: 0 20px 30px -10px #00000080;
            position: relative;
        }

        .person-card:hover {
            border-color: #00a6ff;
            transform: translateY(-8px);
        }

        .person-card h3 {
            font-size: 1.8rem;
            color: #00c3ff;
            margin-bottom: 0.5rem;
        }

        .person-card .rank {
            color: #ffd966;
            font-weight: 600;
        }

        .person-card .contact {
            margin-top: 1.5rem;
            padding-top: 1rem;
            border-top: 1px dashed #334155;
            color: #b2c9ff;
        }

        .edit-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: #ffd700;
            color: #0b0e14;
            padding: 0.2rem 0.8rem;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 600;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .person-card:hover .edit-badge {
            opacity: 1;
        }

        .invite-block {
            background: linear-gradient(145deg, #002766, #001c4d);
            border-radius: 48px;
            padding: 2.5rem;
            text-align: center;
            border: 1px solid #00c3ff;
            margin: 2rem 0;
        }

        .forum-big-link {
            display: inline-block;
            background: #00c3ff;
            color: #0b0e14;
            font-weight: 800;
            padding: 1.2rem 3rem;
            border-radius: 60px;
            font-size: 1.5rem;
            text-decoration: none;
            box-shadow: 0 10px 30px #00a6ff;
            transition: 0.2s;
            border: 2px solid white;
        }

        .forum-big-link:hover {
            background: #4fd5ff;
            transform: scale(1.02);
        }

        .laws-container {
            background: rgba(10, 18, 30, 0.8);
            border-radius: 40px;
            padding: 2rem;
            backdrop-filter: blur(8px);
            border: 1px solid #0077ff40;
        }

        .law-tabs {
            display: flex;
            gap: 0.8rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .law-tab {
            background: rgba(0, 150, 255, 0.1);
            border: 1px solid #0077ff60;
            color: #cbd5ff;
            padding: 0.8rem 2.2rem;
            border-radius: 40px;
            font-weight: 700;
            cursor: pointer;
        }

        .law-tab.active-law {
            background: #0077ff;
            color: white;
            border-color: #00c3ff;
        }

        .law-content {
            display: none;
            background: #0b1424;
            padding: 2rem;
            border-radius: 28px;
            border-left: 6px solid #00c3ff;
            font-size: 1.1rem;
            line-height: 1.7;
            color: #e0eaff;
            white-space: pre-line;
            max-height: 600px;
            overflow-y: auto;
        }

        .law-content.active-law-content {
            display: block;
        }

        .admin-edit-area {
            margin-top: 1rem;
        }

        .admin-textarea {
            width: 100%;
            min-height: 300px;
            background: #1a253c;
            border: 1px solid #ffd700;
            border-radius: 20px;
            padding: 1rem;
            color: white;
            font-size: 1rem;
            font-family: monospace;
            margin-bottom: 1rem;
        }

        .admin-input {
            width: 100%;
            background: #1a253c;
            border: 1px solid #ffd700;
            border-radius: 20px;
            padding: 0.8rem 1rem;
            color: white;
            margin-bottom: 0.5rem;
        }

        .save-btn {
            background: #00ff88;
            border: none;
            border-radius: 40px;
            padding: 0.8rem 2rem;
            color: #0b0e14;
            font-weight: 700;
            cursor: pointer;
            border: 1px solid #00ff88;
            margin-top: 1rem;
        }

        .save-btn:hover {
            background: #00cc66;
        }

        .ai-chat {
            background: #0f1a2b;
            border-radius: 40px;
            border: 1px solid #0077ff60;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 600px;
            margin-top: 2rem;
        }

        .chat-msgs {
            flex: 1;
            overflow-y: auto;
            padding: 1.8rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .msg {
            max-width: 80%;
            padding: 0.9rem 1.5rem;
            border-radius: 28px;
            line-height: 1.5;
            white-space: pre-wrap;
        }

        .user-msg {
            align-self: flex-end;
            background: #0077ff;
            color: white;
            border-bottom-right-radius: 6px;
        }

        .bot-msg {
            align-self: flex-start;
            background: #1e2a44;
            border: 1px solid #00a6ff;
            border-bottom-left-radius: 6px;
        }

        .chat-input-area {
            display: flex;
            padding: 1.5rem;
            background: #0a111f;
            border-top: 2px solid #0077ff;
            gap: 0.8rem;
        }

        .chat-input-area input {
            flex: 1;
            background: #1a253c;
            border: 1px solid #334155;
            border-radius: 50px;
            padding: 1rem 1.8rem;
            color: white;
            outline: none;
        }

        .chat-input-area button {
            background: linear-gradient(145deg, #00c3ff, #0066ff);
            border: none;
            border-radius: 50px;
            padding: 0 2.5rem;
            font-weight: 700;
            color: white;
            cursor: pointer;
        }

        .applications-panel {
            background: rgba(10, 18, 30, 0.8);
            border-radius: 40px;
            padding: 2rem;
            backdrop-filter: blur(8px);
            border: 1px solid #00c3ff;
            margin-top: 2rem;
        }

        .app-form {
            background: #0b1424;
            border-radius: 32px;
            padding: 2rem;
            border: 1px solid #0077ff60;
            margin-bottom: 2rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: #b3d9ff;
            font-weight: 600;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            background: #1a253c;
            border: 1px solid #334155;
            border-radius: 20px;
            padding: 1rem 1.5rem;
            color: white;
            outline: none;
        }

        .form-group textarea {
            min-height: 120px;
            resize: vertical;
        }

        .file-upload-area {
            background: #0f1a2b;
            border: 2px dashed #0077ff;
            border-radius: 24px;
            padding: 2rem;
            text-align: center;
            cursor: pointer;
        }

        .file-upload-area:hover {
            border-color: #00c3ff;
        }

        .file-upload-area input {
            display: none;
        }

        .file-list {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-top: 1rem;
        }

        .file-preview {
            background: #1a253c;
            border-radius: 16px;
            padding: 0.5rem;
            position: relative;
            width: 100px;
            height: 100px;
            border: 1px solid #0077ff;
        }

        .file-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 12px;
        }

        .remove-file {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ff4444;
            color: white;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border: 2px solid white;
        }

        .submit-btn {
            background: linear-gradient(145deg, #00c3ff, #0066ff);
            border: none;
            border-radius: 60px;
            padding: 1.2rem 3rem;
            font-weight: 800;
            color: white;
            cursor: pointer;
            width: 100%;
        }

        .applications-forum {
            margin-top: 3rem;
        }

        .app-card {
            background: #0b1424;
            border-radius: 28px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border: 1px solid #0077ff60;
            position: relative;
        }

        .app-card:hover {
            border-color: #00c3ff;
        }

        .app-id {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: #1a253c;
            padding: 0.3rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            color: #7f92b0;
        }

        .app-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
            flex-wrap: wrap;
            gap: 1rem;
            padding-right: 100px;
        }

        .app-author {
            color: #00c3ff;
            font-weight: 700;
        }

        .app-date {
            color: #7f92b0;
            font-size: 0.9rem;
        }

        .app-title {
            font-size: 1.4rem;
            color: white;
            margin-bottom: 0.8rem;
        }

        .app-text {
            color: #b2c9ff;
            line-height: 1.6;
            margin-bottom: 1rem;
            white-space: pre-wrap;
        }

        .app-images {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .app-image {
            width: 120px;
            height: 120px;
            border-radius: 16px;
            object-fit: cover;
            border: 2px solid #0077ff;
            cursor: pointer;
        }

        .app-actions {
            display: flex;
            margin-top: 1rem;
            justify-content: flex-end;
        }

        .delete-app-btn {
            background: rgba(255, 68, 68, 0.2);
            border: 1px solid #ff4444;
            color: #ff8888;
            padding: 0.5rem 1.5rem;
            border-radius: 30px;
            font-weight: 600;
            cursor: pointer;
        }

        .delete-app-btn:hover {
            background: #ff4444;
            color: white;
        }

        .admin-badge {
            background: #ffd700;
            color: #0b0e14;
            padding: 0.2rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            margin-left: 1rem;
        }

        .footer {
            text-align: center;
            padding: 2rem;
            border-top: 1px solid #1e2a44;
            color: #6b7ca0;
            margin-top: 3rem;
        }

        .read-only-indicator {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid #334155;
            border-radius: 30px;
            padding: 0.3rem 1rem;
            display: inline-block;
            font-size: 0.8rem;
            color: #a5b3d1;
            margin-left: 1rem;
        }

        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #00c3ff;
            color: white;
            padding: 1rem 2rem;
            border-radius: 50px;
            font-weight: 600;
            box-shadow: 0 5px 20px rgba(0, 195, 255, 0.5);
            transform: translateY(100px);
            transition: transform 0.3s ease;
            z-index: 3000;
        }

        .notification.show {
            transform: translateY(0);
        }
    </style>
</head>
<body>
    <div class="notification" id="notification">üì¢ –î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã</div>

    <div class="modal" id="authModal">
        <div class="modal-content">
            <h2 class="modal-title">üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</h2>
            <input type="text" class="modal-input" id="loginInput" placeholder="–õ–æ–≥–∏–Ω">
            <input type="password" class="modal-input" id="passwordInput" placeholder="–ü–∞—Ä–æ–ª—å">
            <button class="modal-btn" id="loginSubmitBtn">–í–æ–π—Ç–∏</button>
            <div class="modal-error" id="authError">–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å</div>
        </div>
    </div>

    <header class="header">
        <nav class="nav">
            <div class="logo">
                <span class="logo-icon">üöî</span> –ì–ò–ë–î–î –†–û–î–ò–ù–ê –†–ü
            </div>
            <div class="nav-links">
                <button class="nav-btn active" data-page="main">–ì–ª–∞–≤–Ω–∞—è</button>
                <button class="nav-btn" data-page="laws">–ó–∞–∫–æ–Ω—ã</button>
                <button class="nav-btn" data-page="charter">–£—Å—Ç–∞–≤</button>
                <button class="nav-btn" data-page="ai">–ü–æ–º–æ—â–Ω–∏–∫</button>
                <button class="nav-btn" data-page="applications">–ó–∞—è–≤–∫–∏</button>
                <div id="authSection">
                    <button class="login-btn" id="showLoginBtn">üîë –í–æ–π—Ç–∏</button>
                </div>
            </div>
        </nav>
    </header>

    <div class="container">
        <!-- –ì–ª–∞–≤–Ω–∞—è -->
        <div id="main" class="page active-page">
            <div style="text-align: center; margin-bottom: 2rem;">
                <h1 style="font-size: 3rem; background: linear-gradient(135deg, #89e0ff, #0066ff); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">–ì–æ—Å–∞–≤—Ç–æ–∏–Ω—Å–ø–µ–∫—Ü–∏—è</h1>
                <p style="color: #a5b3d1;">–°–ª—É–∂–∏–º –∑–∞–∫–æ–Ω—É, –∑–∞—â–∏—â–∞–µ–º –ø–æ—Ä—è–¥–æ–∫ –Ω–∞ –¥–æ—Ä–æ–≥–∞—Ö</p>
            </div>

            <div id="inviteContainer" class="invite-block"></div>

            <h2 style="font-size: 2.2rem; margin: 3rem 0 1rem; color: #b3d9ff;">‚ñ™ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ì–ò–ë–î–î</h2>
            <div id="staffContainer" class="cards-grid"></div>
            <span class="read-only-indicator" id="readOnlyIndicator">üëÅÔ∏è –¢–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞</span>
        </div>

        <!-- –ó–∞–∫–æ–Ω—ã -->
        <div id="laws" class="page">
            <h2 style="font-size: 2.5rem; color: #b3d9ff; margin-bottom: 1.5rem;">üìú –ö–æ–¥–µ–∫—Å—ã</h2>
            <div class="laws-container" id="lawsContainer"></div>
            <span class="read-only-indicator" id="lawsReadOnlyIndicator">üëÅÔ∏è –¢–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞</span>
        </div>

        <!-- –£—Å—Ç–∞–≤ -->
        <div id="charter" class="page">
            <h2 style="font-size: 2.5rem; color: #b3d9ff; margin-bottom: 1.5rem;">üìã –£—Å—Ç–∞–≤</h2>
            <div class="laws-container" id="charterContainer"></div>
            <span class="read-only-indicator" id="charterReadOnlyIndicator">üëÅÔ∏è –¢–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞</span>
        </div>

        <!-- –ò–ò –ü–æ–º–æ—â–Ω–∏–∫ -->
        <div id="ai" class="page">
            <h2 style="font-size: 2.5rem; color: #b3d9ff; margin-bottom: 1rem;">üß† –ü–æ–º–æ—â–Ω–∏–∫</h2>
            <div class="ai-chat">
                <div class="chat-msgs" id="chatMessages">
                    <div class="msg bot-msg">–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –Ø –ø–æ–º–æ—â–Ω–∏–∫ –ì–ò–ë–î–î. –°–ø—Ä–∞—à–∏–≤–∞–π—Ç–µ –æ –∑–∞–∫–æ–Ω–∞—Ö, —É—Å—Ç–∞–≤–µ, —Ä–∞–Ω–≥–∞—Ö –∏–ª–∏ –∑–∞—è–≤–∫–∞—Ö.</div>
                </div>
                <div class="chat-input-area">
                    <input type="text" id="chatInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–æ–ø—Ä–æ—Å...">
                    <button id="sendChatBtn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                </div>
            </div>
        </div>

        <!-- –ó–∞—è–≤–∫–∏ -->
        <div id="applications" class="page">
            <h2 style="font-size: 2.5rem; color: #b3d9ff; margin-bottom: 1rem;">üìã –ó–∞—è–≤–∫–∏</h2>
            
            <div class="applications-panel">
                <div class="app-form">
                    <h3 style="color: #00c3ff; margin-bottom: 1.5rem;">–°–æ–∑–¥–∞—Ç—å –∑–∞—è–≤–∫—É</h3>
                    
                    <div class="form-group">
                        <label>–ê–≤—Ç–æ—Ä</label>
                        <input type="text" id="appAuthor" placeholder="–í–∞—à –Ω–∏–∫–Ω–µ–π–º" value="–ì–æ—Å—Ç—å">
                    </div>

                    <div class="form-group">
                        <label>–ó–∞–≥–æ–ª–æ–≤–æ–∫</label>
                        <input type="text" id="appTitle" placeholder="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ">
                    </div>

                    <div class="form-group">
                        <label>–¢–µ–∫—Å—Ç</label>
                        <textarea id="appText" placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ..."></textarea>
                    </div>

                    <div class="form-group">
                        <label>–§–æ—Ç–æ</label>
                        <div class="file-upload-area" id="fileUploadArea">
                            <input type="file" id="fileInput" multiple accept="image/*">
                            <p>üëÜ –ù–∞–∂–º–∏—Ç–µ –∏–ª–∏ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª—ã</p>
                            <div class="file-list" id="fileList"></div>
                        </div>
                    </div>

                    <button class="submit-btn" id="submitAppBtn">üì® –û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                </div>

                <div class="applications-forum">
                    <h3 style="color: #00c3ff; margin-bottom: 1.5rem;">üìå –õ–µ–Ω—Ç–∞ –∑–∞—è–≤–æ–∫</h3>
                    <div id="applicationsList"></div>
                </div>
            </div>
        </div>
    </div>

    <footer class="footer">
        <p>¬© 2026 –ì–ò–ë–î–î –†–û–î–ò–ù–ê –†–ü. –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –ø–æ—Ä—Ç–∞–ª.</p>
    </footer>

    <script>
        (function() {
            // ---------- –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø ----------
            const STORAGE_KEY = 'gibdd_portal_data';
            const ADMIN_LOGIN = 'admin';
            const ADMIN_PASSWORD = 'admin5765';
            
            // ---------- –î–ê–ù–ù–´–ï –ü–û –£–ú–û–õ–ß–ê–ù–ò–Æ ----------
            const defaultData = {
                forum: {
                    title: "–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Ñ–æ—Ä—É–º –ì–ò–ë–î–î –†–û–î–ò–ù–ê –†–ü",
                    link: "https://forum.rodina-rp.com/forums/163/",
                    description: "–û–±—Å—É–∂–¥–µ–Ω–∏–µ, –≤–æ–ø—Ä–æ—Å—ã, –Ω–∞–≥—Ä–∞–¥—ã"
                },
                staff: [
                    { name: "–ê–ª–µ–∫—Å–µ–π –í–æ—Ä–æ–Ω–æ–≤", rank: "–ù–∞—á–∞–ª—å–Ω–∏–∫ –ì–ò–ë–î–î", contact: "@voronov", phone: "+7 (900) 123-45-67" },
                    { name: "–î–º–∏—Ç—Ä–∏–π –°–æ–∫–æ–ª–æ–≤", rank: "–ó–∞–º. –Ω–∞—á–∞–ª—å–Ω–∏–∫–∞", contact: "@sokolov", phone: "+7 (910) 765-43-21" },
                    { name: "–ï–∫–∞—Ç–µ—Ä–∏–Ω–∞ –í–æ–ª–∫–æ–≤–∞", rank: "–ò–Ω—Å–ø–µ–∫—Ç–æ—Ä", contact: "@volkova", phone: "+7 (920) 555-22-33" }
                ],
                laws: {
                    uk: "**–£–≥–æ–ª–æ–≤–Ω—ã–π –∫–æ–¥–µ–∫—Å –†–§**\n\n–°—Ç–∞—Ç—å—è 158. –ö—Ä–∞–∂–∞\n–°—Ç–∞—Ç—å—è 264. –ù–∞—Ä—É—à–µ–Ω–∏–µ –ü–î–î\n–°—Ç–∞—Ç—å—è 319. –û—Å–∫–æ—Ä–±–ª–µ–Ω–∏–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—è –≤–ª–∞—Å—Ç–∏",
                    ak: "**–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π –∫–æ–¥–µ–∫—Å**\n\n–°—Ç–∞—Ç—å—è 12.6 - –†–µ–º–Ω–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏\n–°—Ç–∞—Ç—å—è 12.8 - –ù–µ—Ç—Ä–µ–∑–≤–æ–µ –≤–æ–∂–¥–µ–Ω–∏–µ\n–°—Ç–∞—Ç—å—è 12.9 - –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏",
                    pdd: "**–ü—Ä–∞–≤–∏–ª–∞ –¥–æ—Ä–æ–∂–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è**\n\n1. –°–∫–æ—Ä–æ—Å—Ç–Ω–æ–π —Ä–µ–∂–∏–º: 60/90/110\n2. –ü–æ–≤–æ—Ä–æ—Ç–Ω–∏–∫–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã\n3. –ü–∞—Ä–∫–æ–≤–∫–∞ –∑–∞–ø—Ä–µ—â–µ–Ω–∞"
                },
                charter: {
                    general: "**–û–±—â–∏–µ –ø–æ–ª–æ–∂–µ–Ω–∏—è**\n\n–°—Ç–∞—Ç—å—è 1. –ì–ò–ë–î–î –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–æ—Ä–æ–∂–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è.\n–°—Ç–∞—Ç—å—è 2. –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏: —Å–æ–±–ª—é–¥–µ–Ω–∏–µ –ü–î–î, –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞.",
                    ranks: "**–†–∞–Ω–≥–∏ –∏ –ø–æ–≤—ã—à–µ–Ω–∏–µ**\n\n1 —Ä–∞–Ω–≥ - –°—Ç–∞–∂—ë—Ä\n2 —Ä–∞–Ω–≥ - –ò–Ω—Å–ø–µ–∫—Ç–æ—Ä\n3 —Ä–∞–Ω–≥ - –õ–µ–π—Ç–µ–Ω–∞–Ω—Ç\n4 —Ä–∞–Ω–≥ - –ö–∞–ø–∏—Ç–∞–Ω",
                    rules: "**–ü—Ä–∞–≤–∏–ª–∞ –∏ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏**\n\n–û–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏: –∑–Ω–∞—Ç—å –∑–∞–∫–æ–Ω—ã, –±—ã—Ç—å –≤–µ–∂–ª–∏–≤—ã–º.\n–ó–∞–ø—Ä–µ—Ç—ã: –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ–º."
                },
                applications: []
            };

            // ---------- –°–û–°–¢–û–Ø–ù–ò–ï ----------
            let database = JSON.parse(JSON.stringify(defaultData));
            let currentUser = null;
            let lastUpdate = Date.now();
            let myUpdate = false;
            let updateTimer = null;

            // ---------- –≠–õ–ï–ú–ï–ù–¢–´ ----------
            const notification = document.getElementById('notification');
            const authModal = document.getElementById('authModal');
            const loginInput = document.getElementById('loginInput');
            const passwordInput = document.getElementById('passwordInput');
            const authError = document.getElementById('authError');
            const authSection = document.getElementById('authSection');
            const readOnlyIndicator = document.getElementById('readOnlyIndicator');
            const lawsReadOnlyIndicator = document.getElementById('lawsReadOnlyIndicator');
            const charterReadOnlyIndicator = document.getElementById('charterReadOnlyIndicator');

            // ---------- –ó–ê–ì–†–£–ó–ö–ê ----------
            function loadData() {
                try {
                    const saved = localStorage.getItem(STORAGE_KEY);
                    if (saved) {
                        const parsed = JSON.parse(saved);
                        if (parsed && parsed.forum) {
                            database = parsed;
                        }
                    } else {
                        saveData(false);
                    }
                } catch (e) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', e);
                }
                renderAll();
            }

            // ---------- –°–û–•–†–ê–ù–ï–ù–ò–ï ----------
            function saveData(notify = true) {
                try {
                    localStorage.setItem(STORAGE_KEY, JSON.stringify(database));
                    if (notify) {
                        myUpdate = true;
                        clearTimeout(updateTimer);
                        updateTimer = setTimeout(() => {
                            myUpdate = false;
                        }, 1000);
                        showNotification('‚úÖ –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã');
                    }
                } catch (e) {
                    console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:', e);
                }
            }

            // ---------- –£–í–ï–î–û–ú–õ–ï–ù–ò–ï ----------
            function showNotification(text) {
                notification.textContent = text;
                notification.classList.add('show');
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            }

            // ---------- –ü–†–û–í–ï–†–ö–ê –û–ë–ù–û–í–õ–ï–ù–ò–ô ----------
            function checkUpdates() {
                try {
                    const saved = localStorage.getItem(STORAGE_KEY);
                    if (saved) {
                        const newData = JSON.parse(saved);
                        if (JSON.stringify(newData) !== JSON.stringify(database)) {
                            if (!myUpdate) {
                                database = newData;
                                renderAll();
                                showNotification('üì¢ –î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã');
                            }
                        }
                    }
                } catch (e) {}
            }

            // ---------- –†–ï–ù–î–ï–† ----------
            function renderAll() {
                renderMainPage();
                renderLaws();
                renderCharter();
                renderApplications();
                updateAuthUI();
            }

            function renderMainPage() {
                document.getElementById('inviteContainer').innerHTML = `
                    <h3 style="color:white; font-size: 2rem;">üì¢ ${database.forum.title}</h3>
                    <p style="color:#cce5ff; margin-bottom: 1.5rem;">${database.forum.description}</p>
                    <a href="${database.forum.link}" target="_blank" class="forum-big-link">üö¶ –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Ñ–æ—Ä—É–º</a>
                `;

                const staffHtml = database.staff.map(person => `
                    <div class="person-card">
                        <div class="edit-badge">${currentUser ? '‚úé –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å' : 'üëÅÔ∏è –ü—Ä–æ—Å–º–æ—Ç—Ä'}</div>
                        ${currentUser ? 
                            `<input type="text" class="admin-input" value="${person.name}" placeholder="–ò–º—è" onchange="updateStaff(${database.staff.indexOf(person)}, 'name', this.value)">` :
                            `<h3>${person.name}</h3>`
                        }
                        ${currentUser ? 
                            `<input type="text" class="admin-input" value="${person.rank}" placeholder="–†–∞–Ω–≥" onchange="updateStaff(${database.staff.indexOf(person)}, 'rank', this.value)">` :
                            `<div class="rank">${person.rank}</div>`
                        }
                        ${currentUser ? 
                            `<div class="contact">
                                <input type="text" class="admin-input" value="${person.contact}" placeholder="–ö–æ–Ω—Ç–∞–∫—Ç" onchange="updateStaff(${database.staff.indexOf(person)}, 'contact', this.value)">
                                <input type="text" class="admin-input" value="${person.phone}" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω" onchange="updateStaff(${database.staff.indexOf(person)}, 'phone', this.value)">
                            </div>` :
                            `<div class="contact">üì® ${person.contact}<br>üìû ${person.phone}</div>`
                        }
                    </div>
                `).join('');
                
                document.getElementById('staffContainer').innerHTML = staffHtml;
            }

            function renderLaws() {
                const container = document.getElementById('lawsContainer');
                if (currentUser) {
                    container.innerHTML = `
                        <div class="law-tabs">
                            <span class="law-tab active-law" onclick="showLawTab('uk')">–£–ö –†–§</span>
                            <span class="law-tab" onclick="showLawTab('ak')">–ê–ö –†–§</span>
                            <span class="law-tab" onclick="showLawTab('pdd')">–ü–î–î</span>
                        </div>
                        <div id="uk-tab" class="admin-edit-area">
                            <textarea id="ukText" class="admin-textarea">${database.laws.uk}</textarea>
                        </div>
                        <div id="ak-tab" class="admin-edit-area" style="display: none;">
                            <textarea id="akText" class="admin-textarea">${database.laws.ak}</textarea>
                        </div>
                        <div id="pdd-tab" class="admin-edit-area" style="display: none;">
                            <textarea id="pddText" class="admin-textarea">${database.laws.pdd}</textarea>
                        </div>
                        <button class="save-btn" onclick="saveLaws()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–∞–∫–æ–Ω—ã</button>
                    `;
                } else {
                    container.innerHTML = `
                        <div class="law-tabs">
                            <span class="law-tab active-law" onclick="showLawView('uk')">–£–ö –†–§</span>
                            <span class="law-tab" onclick="showLawView('ak')">–ê–ö –†–§</span>
                            <span class="law-tab" onclick="showLawView('pdd')">–ü–î–î</span>
                        </div>
                        <div id="uk-view" class="law-content active-law-content">${database.laws.uk.replace(/\n/g, '<br>')}</div>
                        <div id="ak-view" class="law-content">${database.laws.ak.replace(/\n/g, '<br>')}</div>
                        <div id="pdd-view" class="law-content">${database.laws.pdd.replace(/\n/g, '<br>')}</div>
                    `;
                }
            }

            function renderCharter() {
                const container = document.getElementById('charterContainer');
                if (currentUser) {
                    container.innerHTML = `
                        <div class="law-tabs">
                            <span class="law-tab active-law" onclick="showCharterTab('general')">–û–±—â–∏–µ –ø–æ–ª–æ–∂–µ–Ω–∏—è</span>
                            <span class="law-tab" onclick="showCharterTab('ranks')">–†–∞–Ω–≥–∏</span>
                            <span class="law-tab" onclick="showCharterTab('rules')">–ü—Ä–∞–≤–∏–ª–∞</span>
                        </div>
                        <div id="general-tab" class="admin-edit-area">
                            <textarea id="generalText" class="admin-textarea">${database.charter.general}</textarea>
                        </div>
                        <div id="ranks-tab" class="admin-edit-area" style="display: none;">
                            <textarea id="ranksText" class="admin-textarea">${database.charter.ranks}</textarea>
                        </div>
                        <div id="rules-tab" class="admin-edit-area" style="display: none;">
                            <textarea id="rulesText" class="admin-textarea">${database.charter.rules}</textarea>
                        </div>
                        <button class="save-btn" onclick="saveCharter()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —É—Å—Ç–∞–≤</button>
                    `;
                } else {
                    container.innerHTML = `
                        <div class="law-tabs">
                            <span class="law-tab active-law" onclick="showCharterView('general')">–û–±—â–∏–µ –ø–æ–ª–æ–∂–µ–Ω–∏—è</span>
                            <span class="law-tab" onclick="showCharterView('ranks')">–†–∞–Ω–≥–∏</span>
                            <span class="law-tab" onclick="showCharterView('rules')">–ü—Ä–∞–≤–∏–ª–∞</span>
                        </div>
                        <div id="general-view" class="law-content active-law-content">${database.charter.general.replace(/\n/g, '<br>')}</div>
                        <div id="ranks-view" class="law-content">${database.charter.ranks.replace(/\n/g, '<br>')}</div>
                        <div id="rules-view" class="law-content">${database.charter.rules.replace(/\n/g, '<br>')}</div>
                    `;
                }
            }

            function renderApplications() {
                const container = document.getElementById('applicationsList');
                if (database.applications.length === 0) {
                    container.innerHTML = '<p style="color: #7f92b0;">–ü–æ–∫–∞ –Ω–µ—Ç –∑–∞—è–≤–æ–∫</p>';
                    return;
                }

                container.innerHTML = database.applications.map(app => `
                    <div class="app-card">
                        <div class="app-id">ID: ${app.id}</div>
                        <div class="app-header">
                            <span class="app-author">üë§ ${app.author}</span>
                            <span class="app-date">${app.date}</span>
                        </div>
                        <div class="app-title">${app.title}</div>
                        <div class="app-text">${app.text.replace(/\n/g, '<br>')}</div>
                        ${app.images && app.images.length ? `
                            <div class="app-images">
                                ${app.images.map(img => `<img src="${img}" class="app-image" onclick="window.open(this.src)">`).join('')}
                            </div>
                        ` : ''}
                        ${currentUser ? `
                            <div class="app-actions">
                                <button class="delete-app-btn" onclick="deleteApplication(${app.id})">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
                            </div>
                        ` : ''}
                    </div>
                `).join('');
            }

            // ---------- –§–£–ù–ö–¶–ò–ò –î–õ–Ø –ê–î–ú–ò–ù–ê ----------
            window.updateStaff = function(index, field, value) {
                database.staff[index][field] = value;
            };

            window.saveLaws = function() {
                database.laws.uk = document.getElementById('ukText')?.value || database.laws.uk;
                database.laws.ak = document.getElementById('akText')?.value || database.laws.ak;
                database.laws.pdd = document.getElementById('pddText')?.value || database.laws.pdd;
                saveData();
                renderLaws();
                showNotification('‚úÖ –ó–∞–∫–æ–Ω—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã');
            };

            window.saveCharter = function() {
                database.charter.general = document.getElementById('generalText')?.value || database.charter.general;
                database.charter.ranks = document.getElementById('ranksText')?.value || database.charter.ranks;
                database.charter.rules = document.getElementById('rulesText')?.value || database.charter.rules;
                saveData();
                renderCharter();
                showNotification('‚úÖ –£—Å—Ç–∞–≤ —Å–æ—Ö—Ä–∞–Ω–µ–Ω');
            };

            // ---------- –í–ö–õ–ê–î–ö–ò ----------
            window.showLawTab = function(tab) {
                document.querySelectorAll('[id$="-tab"]').forEach(el => el.style.display = 'none');
                document.getElementById(tab + '-tab').style.display = 'block';
                
                document.querySelectorAll('[data-law]').forEach(el => el.classList.remove('active-law'));
                event.target.classList.add('active-law');
            };

            window.showLawView = function(tab) {
                document.querySelectorAll('[id$="-view"]').forEach(el => el.classList.remove('active-law-content'));
                document.getElementById(tab + '-view').classList.add('active-law-content');
                
                document.querySelectorAll('[data-law]').forEach(el => el.classList.remove('active-law'));
                event.target.classList.add('active-law');
            };

            window.showCharterTab = function(tab) {
                document.querySelectorAll('[id$="-tab"]').forEach(el => el.style.display = 'none');
                document.getElementById(tab + '-tab').style.display = 'block';
            };

            window.showCharterView = function(tab) {
                document.querySelectorAll('[id$="-view"]').forEach(el => el.classList.remove('active-law-content'));
                document.getElementById(tab + '-view').classList.add('active-law-content');
            };

            // ---------- –ê–í–¢–û–†–ò–ó–ê–¶–ò–Ø ----------
            function updateAuthUI() {
                if (currentUser) {
                    authSection.innerHTML = `
                        <div class="user-info">
                            <span class="user-name">üë§ ${currentUser}</span>
                            <span class="admin-badge">–ê–¥–º–∏–Ω</span>
                            <button class="logout-btn" id="logoutBtn">‚úï</button>
                        </div>
                    `;
                    document.getElementById('logoutBtn').addEventListener('click', logout);
                    
                    readOnlyIndicator.textContent = 'üîì –†–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è';
                    lawsReadOnlyIndicator.textContent = 'üîì –†–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è';
                    charterReadOnlyIndicator.textContent = 'üîì –†–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è';
                } else {
                    authSection.innerHTML = '<button class="login-btn" id="showLoginBtn">üîë –í–æ–π—Ç–∏</button>';
                    document.getElementById('showLoginBtn').addEventListener('click', showAuthModal);
                    
                    readOnlyIndicator.textContent = 'üëÅÔ∏è –¢–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞';
                    lawsReadOnlyIndicator.textContent = 'üëÅÔ∏è –¢–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞';
                    charterReadOnlyIndicator.textContent = 'üëÅÔ∏è –¢–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞';
                }
                
                renderAll();
            }

            function showAuthModal() {
                loginInput.value = '';
                passwordInput.value = '';
                authError.classList.remove('show');
                authModal.classList.add('active');
            }

            function hideAuthModal() {
                authModal.classList.remove('active');
            }

            function login() {
                if (loginInput.value.trim() === ADMIN_LOGIN && passwordInput.value.trim() === ADMIN_PASSWORD) {
                    currentUser = ADMIN_LOGIN;
                    localStorage.setItem('gibdd_user', ADMIN_LOGIN);
                    hideAuthModal();
                    updateAuthUI();
                } else {
                    authError.classList.add('show');
                }
            }

            function logout() {
                currentUser = null;
                localStorage.removeItem('gibdd_user');
                updateAuthUI();
            }

            // ---------- –ó–ê–Ø–í–ö–ò ----------
            window.deleteApplication = function(id) {
                if (!currentUser) return;
                if (confirm('–£–¥–∞–ª–∏—Ç—å –∑–∞—è–≤–∫—É?')) {
                    database.applications = database.applications.filter(app => app.id !== id);
                    saveData();
                    renderApplications();
                }
            };

            // ---------- –ù–ê–í–ò–ì–ê–¶–ò–Ø ----------
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const pageId = btn.dataset.page;
                    document.querySelectorAll('.page').forEach(p => p.classList.remove('active-page'));
                    document.getElementById(pageId).classList.add('active-page');
                    
                    document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                });
            });

            // ---------- –ß–ê–¢ ----------
            const chatMessages = document.getElementById('chatMessages');
            const chatInput = document.getElementById('chatInput');
            
            document.getElementById('sendChatBtn').addEventListener('click', () => {
                const text = chatInput.value.trim();
                if (!text) return;
                
                addMessage(text, 'user');
                chatInput.value = '';
                
                setTimeout(() => {
                    let reply = '–ò–∑–≤–∏–Ω–∏—Ç–µ, —è –Ω–µ —Å–æ–≤—Å–µ–º –ø–æ–Ω—è–ª.';
                    const q = text.toLowerCase();
                    
                    if (q.includes('–ø—Ä–∏–≤–µ—Ç')) reply = '–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ß–µ–º –ø–æ–º–æ—á—å?';
                    else if (q.includes('–∑–∞–∫–æ–Ω')) reply = '–ó–∞–∫–æ–Ω—ã –Ω–∞ –≤–∫–ª–∞–¥–∫–µ "–ó–∞–∫–æ–Ω—ã".';
                    else if (q.includes('—É—Å—Ç–∞–≤')) reply = '–£—Å—Ç–∞–≤ –Ω–∞ –≤–∫–ª–∞–¥–∫–µ "–£—Å—Ç–∞–≤".';
                    else if (q.includes('—Ä–∞–Ω–≥')) reply = '–†–∞–Ω–≥–∏ –≤ —Ä–∞–∑–¥–µ–ª–µ "–£—Å—Ç–∞–≤".';
                    else if (q.includes('–∑–∞—è–≤–∫')) reply = `–í—Å–µ–≥–æ –∑–∞—è–≤–æ–∫: ${database.applications.length}`;
                    else if (q.includes('—Å–æ—Ç—Ä—É–¥–Ω–∏–∫')) {
                        reply = database.staff.map(s => `${s.name} - ${s.rank}`).join('\n');
                    }
                    
                    addMessage(reply, 'bot');
                }, 500);
            });

            function addMessage(text, sender) {
                const msg = document.createElement('div');
                msg.className = `msg ${sender === 'user' ? 'user-msg' : 'bot-msg'}`;
                msg.textContent = text;
                chatMessages.appendChild(msg);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }

            chatInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') document.getElementById('sendChatBtn').click();
            });

            // ---------- –ó–ê–ì–†–£–ó–ö–ê –§–ê–ô–õ–û–í ----------
            const fileInput = document.getElementById('fileInput');
            const fileList = document.getElementById('fileList');
            let selectedFiles = [];

            function handleFiles(files) {
                selectedFiles = [...selectedFiles, ...Array.from(files).filter(f => f.type.startsWith('image/'))];
                renderFilePreviews();
            }

            function renderFilePreviews() {
                fileList.innerHTML = '';
                selectedFiles.forEach((file, index) => {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        const preview = document.createElement('div');
                        preview.className = 'file-preview';
                        preview.innerHTML = `
                            <img src="${e.target.result}">
                            <div class="remove-file" onclick="removeFile(${index})">√ó</div>
                        `;
                        fileList.appendChild(preview);
                    };
                    reader.readAsDataURL(file);
                });
            }

            window.removeFile = function(index) {
                selectedFiles.splice(index, 1);
                renderFilePreviews();
            };

            fileInput.addEventListener('change', (e) => handleFiles(e.target.files));
            document.getElementById('fileUploadArea').addEventListener('click', () => fileInput.click());
            document.getElementById('fileUploadArea').addEventListener('dragover', (e) => e.preventDefault());
            document.getElementById('fileUploadArea').addEventListener('drop', (e) => {
                e.preventDefault();
                handleFiles(e.dataTransfer.files);
            });

            // ---------- –°–û–ó–î–ê–ù–ò–ï –ó–ê–Ø–í–ö–ò ----------
            document.getElementById('submitAppBtn').addEventListener('click', () => {
                const author = document.getElementById('appAuthor').value.trim() || '–ì–æ—Å—Ç—å';
                const title = document.getElementById('appTitle').value.trim();
                const text = document.getElementById('appText').value.trim();

                if (!title || !text) {
                    alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ —Ç–µ–∫—Å—Ç');
                    return;
                }

                Promise.all(selectedFiles.map(file => new Promise(resolve => {
                    const reader = new FileReader();
                    reader.onload = (e) => resolve(e.target.result);
                    reader.readAsDataURL(file);
                }))).then(images => {
                    database.applications.unshift({
                        id: Date.now(),
                        author, title, text, images,
                        date: new Date().toLocaleString()
                    });
                    
                    saveData();
                    
                    document.getElementById('appTitle').value = '';
                    document.getElementById('appText').value = '';
                    selectedFiles = [];
                    renderFilePreviews();
                    renderApplications();
                    
                    showNotification('‚úÖ –ó–∞—è–≤–∫–∞ —Å–æ–∑–¥–∞–Ω–∞');
                });
            });

            // ---------- –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ----------
            if (localStorage.getItem('gibdd_user')) {
                currentUser = localStorage.getItem('gibdd_user');
            }

            loadData();
            setInterval(checkUpdates, 2000);

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
            document.getElementById('loginSubmitBtn').addEventListener('click', login);
            loginInput.addEventListener('keypress', (e) => e.key === 'Enter' && login());
            passwordInput.addEventListener('keypress', (e) => e.key === 'Enter' && login());
            authModal.addEventListener('click', (e) => e.target === authModal && hideAuthModal());
        })();
    </script>
</body>
</html>
